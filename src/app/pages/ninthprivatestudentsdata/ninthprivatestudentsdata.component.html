

<form [formGroup]="form" novalidate>
<div class="row">
  
    <div class="col-3">
      <tc-input [placeholder]="'Search school'" [type]="'search'" formControlName="schoolname" ></tc-input>

    </div>

    <div class="col-3">
      <tc-input [placeholder]="'Search by Name'" [type]="'search'" formControlName="studentname" ></tc-input>
    </div>

    <div class="col-3">
      <button tc-button [block]="true" [view]="'accent'" (click)="search()" > Search</button>
    </div>
  
  </div>

<div class="row">
  <div style="margin-top:2px;">
  </div>
</div>


  <div class="row">
    <div class="col-3">
      <tc-input [placeholder]="'Search by fathername'" [type]="'search'" formControlName="fathername" ></tc-input>
    </div>

    <div class="col-3">
      <tc-input [placeholder]="'Search by roll number'" [type]="'search'" formControlName="enrollmentnumber" ></tc-input>
    </div>

    <div class="col-3">
      <button tc-button [block]="true" [view]="'accent'"  > Print Marksheet</button>
    </div>

    <div class="col-3">
      <button tc-button [block]="true" [view]="'accent'" (click)="downloaduserdata()" > Print Data</button>
    </div>

    </div> 

    

  </form>

<!-- <div class="row">
  <h3>Data</h3>
  </div>



<tc-card class="mb-0">
<tc-table [rows]="rows"  [hovered]="true" [pagination]="true" [headerBgColor]="'#336cfb'" [headerColor]="'#fff'" >
  <tc-table-col [columnTitle]="'Student Name'" [columnName]="'studentinfo'" [enableSorting]="true"> 

  	<ng-template #tableTDTemplate let-value>
       {{ value.studentname}}
      </ng-template>

  </tc-table-col>

  <tc-table-col [columnTitle]="'Student Name'" [columnName]="'studentinfo'" [enableSorting]="true"> 

    <ng-template #tableTDTemplate let-value>
       {{ value.fathername}}
      </ng-template>

  </tc-table-col>


  <tc-table-col [columnTitle]="'Enrollment Number'" [columnName]="'studentinfo'">
    <ng-template #tableTDTemplate let-value>
      {{value.enrollmentnumber}}
    </ng-template>
  </tc-table-col>
  <tc-table-col [columnTitle]="'School'" [columnName]="'studentinfo'">
  	
<ng-template #tableTDTemplate let-value>
       {{ value.schoolname.schoolname}}
      </ng-template>

  </tc-table-col>
  <tc-table-col [columnTitle]="'English Marks'" [columnName]="'EnglishMarks'"></tc-table-col>
  <tc-table-col [columnTitle]="'Sindhi Marks'" [columnName]="'SindhiMarks'"></tc-table-col>
  <tc-table-col [columnTitle]="'Pakistan Studies Marks'" [columnName]="'PakistanStudiesMark'"></tc-table-col>
  <tc-table-col [columnTitle]="'General Science Marks'" [columnName]="'GeneralScienceMarks'"></tc-table-col>
  <tc-table-col [columnTitle]="'Maths Marks'" [columnName]="'MathsMarks'"></tc-table-col>
   

  <tc-table-col [columnTitle]="'Total Marks'" [columnName]="'TotalMarks'"></tc-table-col>
  <tc-table-col [columnTitle]="'Cleared Papers'" [columnName]="'Totalclearedpaper'"></tc-table-col>


  <tc-table-col [columnTitle]="'Percentage'" [columnName]="'OverallPercentage'" > </tc-table-col>
<tc-table-col [columnTitle]="'Grade'" [columnName]="'grade'"></tc-table-col> 
<tc-table-col [columnTitle]="'Group'" [columnName]="'group'"></tc-table-col> 
  <tc-table-col [columnTitle]="'Exam Type'" [columnName]="'examtype'" >
   
</tc-table-col>

<tc-table-col [columnTitle]="'Operations'">
  <ng-template #tableTDTemplate >
  <button tc-button [block]="true" [view]="'accent'" (click)="generatePdf(rows)"   > Print Marksheet</button>
  <button tc-button [block]="true" [view]="'accent'" > Print Data</button>
</ng-template>
  </tc-table-col>
    
 </tc-table>

 </tc-card> -->


 <div class="row">
  <h3>Data</h3>
  </div>



 <div class="row" *ngIf="!searchresult"  >



<table mat-table [dataSource]="tableData" *ngIf="!searchresult" >

   <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>
      <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()"
                    [aria-label]="checkboxLabel()">
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)"
                    [aria-label]="checkboxLabel(row)">
      </mat-checkbox>
    </td>
  </ng-container>


   <ng-container matColumnDef="studentname">
    <th mat-header-cell *matHeaderCellDef> Name. </th>
    <td mat-cell *matCellDef="let element"> {{element.studentinfo.studentname}} </td>
  </ng-container>

  
  <ng-container matColumnDef="fathername">
    <th mat-header-cell *matHeaderCellDef> Father </th>
    <td mat-cell *matCellDef="let element"> {{element.studentinfo.fathername}} </td>
  </ng-container>

  
   <ng-container matColumnDef="Schoolname">
    <th mat-header-cell *matHeaderCellDef> School </th>
    <td mat-cell *matCellDef="let element"> {{element.studentinfo.schoolname.schoolname}} </td>
  </ng-container>


   <ng-container matColumnDef="enrollmentnumber">
    <th mat-header-cell *matHeaderCellDef> Roll No </th>
    <td mat-cell *matCellDef="let element"> {{element.studentinfo.enrollmentnumber}} </td>
  </ng-container>

 
  <ng-container matColumnDef="englishmarks">
    <th mat-header-cell *matHeaderCellDef> Eng </th>
    <td mat-cell *matCellDef="let element"> {{element.englishmarks}} </td>
  </ng-container>

   <ng-container matColumnDef="sindhimarks">
    <th mat-header-cell *matHeaderCellDef> Sindhi </th>
    <td mat-cell *matCellDef="let element"> {{element.sindhimarks}} </td>
  </ng-container>

  <ng-container matColumnDef="pakistanstudiesmark">
    <th mat-header-cell *matHeaderCellDef> PST </th>
    <td mat-cell *matCellDef="let element"> {{element.pakistanstudiesmark}} </td>
  </ng-container>

  <ng-container matColumnDef="generalsciencemarks">
    <th mat-header-cell *matHeaderCellDef> GS </th>
    <td mat-cell *matCellDef="let element"> {{element.generalsciencemarks}} </td>
  </ng-container>

  <ng-container matColumnDef="mathmarks">
    <th mat-header-cell *matHeaderCellDef> Math </th>
    <td mat-cell *matCellDef="let element"> {{element.mathsmarks}} </td>
  </ng-container>

 

  <ng-container matColumnDef="group">
    <th mat-header-cell *matHeaderCellDef> Group </th>
    <td mat-cell *matCellDef="let element"> {{element.group}} </td>
  </ng-container>

  <ng-container matColumnDef="totalclearedpaper">
    <th mat-header-cell *matHeaderCellDef> Cleared </th>
    <td mat-cell *matCellDef="let element"> {{element.totalclearedpaper}} </td>
  </ng-container> 

  <tr mat-header-row *matHeaderRowDef="displayedColumns" class="header"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click) = "rowClicked(row)"></tr>


</table>


</div> 


<div class="row" *ngIf="searchresult" >

 <table mat-table [dataSource]="searchresultdata" class="mat-elevation-z8">

  
  <ng-container matColumnDef="select">
    <th mat-header-cell *matHeaderCellDef>
      <mat-checkbox (change)="$event ? masterToggle() : null"
                    [checked]="selection.hasValue() && isAllSelected()"
                    [indeterminate]="selection.hasValue() && !isAllSelected()"
                    [aria-label]="checkboxLabel()">
      </mat-checkbox>
    </th>
    <td mat-cell *matCellDef="let row">
      <mat-checkbox (click)="$event.stopPropagation()"
                    (change)="$event ? selection.toggle(row) : null"
                    [checked]="selection.isSelected(row)"
                    [aria-label]="checkboxLabel(row)">
      </mat-checkbox>
    </td>
  </ng-container>

  <ng-container matColumnDef="studentname">
    <th mat-header-cell *matHeaderCellDef> Name. </th>
    <td mat-cell *matCellDef="let element"> {{element.studentname}} </td>
  </ng-container>

  
  <ng-container matColumnDef="fathername">
    <th mat-header-cell *matHeaderCellDef> Father </th>
    <td mat-cell *matCellDef="let element"> {{element.fathername}} </td>
  </ng-container>

  
   <ng-container matColumnDef="Schoolname">
    <th mat-header-cell *matHeaderCellDef> School </th>
    <td mat-cell *matCellDef="let element"> {{element.schoolname.schoolname}} </td>
  </ng-container>


   <ng-container matColumnDef="enrollmentnumber">
    <th mat-header-cell *matHeaderCellDef> Roll No </th>
    <td mat-cell *matCellDef="let element"> {{element.enrollmentnumber}} </td>
  </ng-container>

 
  <ng-container matColumnDef="englishmarks">
    <th mat-header-cell *matHeaderCellDef> Eng </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.englishmarks:'-' }} </td>
  </ng-container>

   <ng-container matColumnDef="sindhimarks">
    <th mat-header-cell *matHeaderCellDef> Sindhi </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.sindhimarks: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="pakistanstudiesmark">
    <th mat-header-cell *matHeaderCellDef> PST </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.pakistanstudiesmark: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="generalsciencemarks">
    <th mat-header-cell *matHeaderCellDef> GS </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.generalsciencemarks: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="mathmarks">
    <th mat-header-cell *matHeaderCellDef> Maths </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.mathsmarks: '-'}} </td>
  </ng-container>

  
  <ng-container matColumnDef="group">
    <th mat-header-cell *matHeaderCellDef> Group </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.group: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="totalclearedpaper">
    <th mat-header-cell *matHeaderCellDef> Cleared </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata?element.ninthgeneraldata.totalclearedpaper: '-'}} </td>
  </ng-container> 

  <tr mat-header-row *matHeaderRowDef="displayedColumns" class="header"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns;" (click) = "rowClicked(row)"></tr> 
</table>

 </div> 

 
<div id="contentToConvert" *ngIf="displayselecteddata">
  <div class="row">
    <h3>Printed Data</h3>
  </div>

 <div class="row" >

 <table mat-table [dataSource]="selecteddataarray"   class="mat-elevation-z8" >

  
 
  <ng-container matColumnDef="studentname">
    <th mat-header-cell *matHeaderCellDef> Name. </th>
    <td mat-cell *matCellDef="let element"> {{element? element.studentname || element.studentinfo.studentname: '-'}} </td>
  </ng-container>

  
  <ng-container matColumnDef="fathername">
    <th mat-header-cell *matHeaderCellDef> Father </th>
    <td mat-cell *matCellDef="let element"> {{element? element.fathername || element.studentinfo.fathername: '-'}} </td>
  </ng-container>

  
   <ng-container matColumnDef="Schoolname">
    <th mat-header-cell *matHeaderCellDef> School </th>
    <td mat-cell *matCellDef="let element"> {{element.schoolname? element.schoolname.schoolname : element.studentinfo? element.studentinfo.schoolname.schoolname : '-' }} </td>
  </ng-container>


   <ng-container matColumnDef="enrollmentnumber">
    <th mat-header-cell *matHeaderCellDef> Roll No </th>
    <td mat-cell *matCellDef="let element"> {{element.studentinfo? element.studentinfo.enrollmentnumber: element.enrollmentnumber? element.enrollmentnumber: '-' }} </td>
  </ng-container>

 
  <ng-container matColumnDef="englishmarks">
    <th mat-header-cell *matHeaderCellDef> Eng </th>
    <td mat-cell *matCellDef="let element"> {{ element.ninthgeneraldata? element.ninthgeneraldata.englishmarks: element? element.englishmarks: '-'  }} </td>
  </ng-container>s

   <ng-container matColumnDef="sindhimarks">
    <th mat-header-cell *matHeaderCellDef> Sindhi </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.sindhimarks: element? element.sindhimarks: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="pakistanstudiesmark">
    <th mat-header-cell *matHeaderCellDef> PST </th>
    <td mat-cell *matCellDef="let element"> {{ element.ninthgeneraldata? element.ninthgeneraldata.pakistanstudiesmark: element? element.pakistanstudiesmark: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="generalsciencemarks">
    <th mat-header-cell *matHeaderCellDef> GS </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.generalsciencemarks: element? element.generalsciencemarks: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="mathmarks">
    <th mat-header-cell *matHeaderCellDef> Maths </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.mathsmarks: element? element.mathsmarks: '-'}} </td>
  </ng-container>

  
  <ng-container matColumnDef="group">
    <th mat-header-cell *matHeaderCellDef> Group </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.group: element? element.group: '-'}} </td>
  </ng-container>

  <ng-container matColumnDef="totalclearedpaper">
    <th mat-header-cell *matHeaderCellDef> Cleared </th>
    <td mat-cell *matCellDef="let element"> {{element.ninthgeneraldata? element.ninthgeneraldata.totalclearedpaper: element? element.totalclearedpaper: '-'}} </td>
  </ng-container> 
 
  <tr mat-header-row *matHeaderRowDef="pdftableColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: pdftableColumns;"  ></tr> 
</table>
</div>
</div>